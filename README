# Script to backup linux server to aws ec2.
# Lindo St. Angel 2014/5.

# Script assumes an existing aws account and aws cli tools have been installed on client.
# The aws cli's credentials must have been correctly configured and command output set to 'text'.

# Script only uses aws CPU and disk space while in operation to minimize $$.

# Script backups incremental changes from the last backup.
# This assumes that a full backup was done to start with. 

# This script generally follows these steps (with error checking).
# 1. Get external IP address of host (also serves to check for Internet connection.)
# 2. Create a volume from the previous backup snapshot.
# 3. Create an ec2 security group. 
# 4. Create an machine instance with ec2.
# 5. Attach a volume to it.
# 6. Mount the volume.
# 7. rsync some directories to the volume mounted on the remote machine
# 8. Unmount and detach the volume.
# 9. Terminate the machine.
# 10. Delete security group.
# 11. Backup the volume to an S3 snapshot. 
# 12. Delete the volume.
